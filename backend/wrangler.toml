name = "latex-book-generator"
main = "src/index.ts"
compatibility_date = "2024-01-01"
node_compat = true

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "latex-book-db"
database_id = "" # Fill this in after creating the database

# R2 Storage
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "latex-files"

# Environment Variables (for development)
[vars]
NODE_ENV = "development"
RATE_LIMIT_WINDOW_MS = "900000"
RATE_LIMIT_MAX_REQUESTS = "100"

# Secrets (set via: wrangler secret put CLAUDE_API_KEY)
# CLAUDE_API_KEY
# OPENAI_API_KEY

# Production environment
[env.production]
name = "latex-book-generator-prod"
vars = { NODE_ENV = "production" }

[[env.production.d1_databases]]
binding = "DB"
database_name = "latex-book-db-prod"
database_id = "" # Fill this in after creating the production database

[[env.production.r2_buckets]]
binding = "BUCKET"
bucket_name = "latex-files-prod"
