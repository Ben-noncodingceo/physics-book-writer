name = "physicsbookwriter"
main = "dist/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "physics-book-writer-d1"
database_id = "0a09cf11-829c-46e8-8fde-b9946c73f1e7"

# R2 Storage
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "physics-book-writer"

# Environment Variables (for development)
[vars]
NODE_ENV = "development"
RATE_LIMIT_WINDOW_MS = "900000"
RATE_LIMIT_MAX_REQUESTS = "100"

# Secrets (set via: wrangler secret put)
# GEMINI_API_KEY
# TONGYI_API_KEY
# OPENAI_API_KEY

# Production environment
[env.production]
name = "physicsbookwriter-prod"
vars = { NODE_ENV = "production" }

[[env.production.d1_databases]]
binding = "DB"
database_name = "physics-book-writer-d1"
database_id = "0a09cf11-829c-46e8-8fde-b9946c73f1e7"

[[env.production.r2_buckets]]
binding = "BUCKET"
bucket_name = "physics-book-writer"
